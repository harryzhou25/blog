## User interfaces

### Demand analysis

1. Login

   - Frontend Request Analysis:

     - Login with account and password given by user.
     - Detect issue with account number or password.

   - Vo design:

     - loginParam:
       - String account: account number given by user
       - String password: password given by user

   - Backend Interface: 

     | URL        | Parameter  | Method | Return Data |
     | ---------- | ---------- | ------ | ----------- |
     | ``/login`` | loginParam | Post   | JWT Token   |

   - Details of implementation:

     - First of all I checked whether the user gives valid input.
     - Decode the password with the same salt and algorithm then query the record according to account number and decoded password.
     - Create new JWT token and added it into redis server.

2. Logout

   - Frontend Request Analysis:

     - Logout current user

   - Backend Interface:

     | URL         | Parameter | Method | Return Data |
     | ----------- | --------- | ------ | ----------- |
     | ``/logout`` | JWT token | Get    | String      |

   - Details of implementation:

     - First of all I checked whether the user gives valid input.
     - The user could request logout only in login status, so I could just delete the token from redis server.
     - To avoid the case that the user was not logged in, I added the path ``/logout`` into interceptor to make sure the token is exists and correct.

3. Register

   - Frontend Request Analysis:

     - Register new account with given username, account and password

   - Backend Interface:

     | URL           | Parameter     | Method | Return Data |
     | ------------- | ------------- | ------ | ----------- |
     | ``/register`` | registerParam | Post   | JWT token   |

   - Details of implementation:

     - First of all I checked whether the user gives valid input and the whether the account number is already existed.
     - Then set other information of the user and insert into data table. The user id are generated by Snow Take algorithm.

4. Interceptor

   To avoid some issues like logging out on a not logged in account, I implemented a interceptor to intercept some request and check whether the user was logged in.

   - Details of implementation:

     - Collect the token in Authorization part in request header.
     - Check whether the token is existed and valid.

     